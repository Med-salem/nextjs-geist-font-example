{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/progress-bar\";\nfunction LoginComponent_mat_progress_bar_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 13);\n  }\n}\nfunction LoginComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Please enter a valid 10-digit phone number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_mat_form_field_15_mat_error_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Please enter a valid 6-digit OTP \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_mat_form_field_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-form-field\", 4)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"OTP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 14);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_mat_form_field_15_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.otp, $event) || (ctx_r2.otp = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-icon\", 6);\n    i0.ɵɵtext(5, \"lock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, LoginComponent_mat_form_field_15_mat_error_6_Template, 2, 0, \"mat-error\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    const loginForm_r4 = i0.ɵɵreference(7);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.otp);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", loginForm_r4.controls[\"otp\"] == null ? null : loginForm_r4.controls[\"otp\"].errors == null ? null : loginForm_r4.controls[\"otp\"].errors[\"pattern\"]);\n  }\n}\nfunction LoginComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMessage, \" \");\n  }\n}\nfunction LoginComponent_button_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function LoginComponent_button_22_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.requestOTP());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"refresh\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Resend OTP \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.loading);\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.phoneNumber = '';\n      this.otp = '';\n      this.errorMessage = '';\n      this.otpRequested = false;\n      this.loading = false;\n    }\n    requestOTP() {\n      if (!this.phoneNumber) {\n        this.errorMessage = 'Please enter a phone number';\n        return;\n      }\n      this.loading = true;\n      this.authService.requestOTP(this.phoneNumber).subscribe({\n        next: response => {\n          this.otpRequested = true;\n          this.errorMessage = '';\n          this.loading = false;\n        },\n        error: error => {\n          this.errorMessage = error.error?.message || 'Failed to send OTP';\n          this.loading = false;\n        }\n      });\n    }\n    verifyOTP() {\n      if (!this.otp) {\n        this.errorMessage = 'Please enter the OTP';\n        return;\n      }\n      this.loading = true;\n      this.authService.verifyOTP(this.phoneNumber, this.otp).subscribe({\n        next: response => {\n          this.errorMessage = '';\n          this.loading = false;\n          this.router.navigate(['/dashboard']);\n        },\n        error: error => {\n          this.errorMessage = error.error?.message || 'Invalid OTP';\n          this.loading = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        decls: 23,\n        vars: 10,\n        consts: [[\"loginForm\", \"ngForm\"], [1, \"login-card\"], [\"mode\", \"indeterminate\", 4, \"ngIf\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"type\", \"tel\", \"name\", \"phoneNumber\", \"required\", \"\", \"pattern\", \"[0-9]{10}\", \"placeholder\", \"Enter 10 digit number\", 3, \"ngModelChange\", \"ngModel\", \"readonly\"], [\"matSuffix\", \"\"], [4, \"ngIf\"], [\"appearance\", \"outline\", \"class\", \"full-width\", 4, \"ngIf\"], [\"class\", \"error-message mat-error\", 4, \"ngIf\"], [1, \"button-container\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 1, \"full-width\", 3, \"disabled\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", \"class\", \"full-width resend-button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mode\", \"indeterminate\"], [\"matInput\", \"\", \"type\", \"text\", \"name\", \"otp\", \"required\", \"\", \"pattern\", \"[0-9]{6}\", \"maxlength\", \"6\", \"placeholder\", \"Enter 6 digit OTP\", 3, \"ngModelChange\", \"ngModel\"], [1, \"error-message\", \"mat-error\"], [\"mat-stroked-button\", \"\", \"type\", \"button\", 1, \"full-width\", \"resend-button\", 3, \"click\", \"disabled\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"mat-card\", 1)(1, \"mat-card-header\")(2, \"mat-card-title\");\n            i0.ɵɵtext(3, \"Login with Phone\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"mat-card-content\");\n            i0.ɵɵtemplate(5, LoginComponent_mat_progress_bar_5_Template, 1, 0, \"mat-progress-bar\", 2);\n            i0.ɵɵelementStart(6, \"form\", 3, 0);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_6_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.otpRequested ? ctx.verifyOTP() : ctx.requestOTP());\n            });\n            i0.ɵɵelementStart(8, \"mat-form-field\", 4)(9, \"mat-label\");\n            i0.ɵɵtext(10, \"Phone Number\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.phoneNumber, $event) || (ctx.phoneNumber = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-icon\", 6);\n            i0.ɵɵtext(13, \"phone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(14, LoginComponent_mat_error_14_Template, 2, 0, \"mat-error\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(15, LoginComponent_mat_form_field_15_Template, 7, 2, \"mat-form-field\", 8)(16, LoginComponent_div_16_Template, 4, 1, \"div\", 9);\n            i0.ɵɵelementStart(17, \"div\", 10)(18, \"button\", 11)(19, \"mat-icon\");\n            i0.ɵɵtext(20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(21);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(22, LoginComponent_button_22_Template, 4, 1, \"button\", 12);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            const loginForm_r4 = i0.ɵɵreference(7);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.phoneNumber);\n            i0.ɵɵproperty(\"readonly\", ctx.otpRequested);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", loginForm_r4.controls[\"phoneNumber\"] == null ? null : loginForm_r4.controls[\"phoneNumber\"].errors == null ? null : loginForm_r4.controls[\"phoneNumber\"].errors[\"pattern\"]);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.otpRequested);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading || !ctx.otpRequested && !ctx.phoneNumber || ctx.otpRequested && !ctx.otp);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.otpRequested ? \"login\" : \"send\");\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.otpRequested ? \"Verify OTP\" : \"Request OTP\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.otpRequested);\n          }\n        },\n        dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MaxLengthValidator, i4.PatternValidator, i4.NgModel, i4.NgForm, i5.MatButton, i6.MatIcon, i7.MatCard, i7.MatCardContent, i7.MatCardHeader, i7.MatCardTitle, i8.MatInput, i9.MatFormField, i9.MatLabel, i9.MatError, i9.MatSuffix, i10.MatProgressBar],\n        styles: [\".login-card[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}mat-card-header[_ngcontent-%COMP%]{justify-content:center;margin-bottom:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:500}.error-message[_ngcontent-%COMP%]{color:#f44336;text-align:center;margin-bottom:1rem;font-weight:500}button[mat-raised-button][_ngcontent-%COMP%]{padding:.5rem;font-size:1rem}mat-form-field[_ngcontent-%COMP%]{display:block}\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}